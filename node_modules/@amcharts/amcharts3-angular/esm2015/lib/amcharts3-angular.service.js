import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class AmChartsService {
    constructor(zone) {
        this.zone = zone;
    }
    get StockPanel() {
        return AmCharts.StockPanel;
    }
    get StockGraph() {
        return AmCharts.StockGraph;
    }
    get StockEvent() {
        return AmCharts.StockEvent;
    }
    get StockLegend() {
        return AmCharts.StockLegend;
    }
    get baseHref() {
        return AmCharts.baseHref;
    }
    set baseHref(v) {
        AmCharts.baseHref = v;
    }
    get useUTC() {
        return AmCharts.useUTC;
    }
    set useUTC(v) {
        AmCharts.useUTC = v;
    }
    get dayNames() {
        return AmCharts.dayNames;
    }
    set dayNames(v) {
        AmCharts.dayNames = v;
    }
    get monthNames() {
        return AmCharts.monthNames;
    }
    set monthNames(v) {
        AmCharts.monthNames = v;
    }
    get shortDayNames() {
        return AmCharts.shortDayNames;
    }
    set shortDayNames(v) {
        AmCharts.shortDayNames = v;
    }
    get shortMonthNames() {
        return AmCharts.shortMonthNames;
    }
    set shortMonthNames(v) {
        AmCharts.shortMonthNames = v;
    }
    // TODO better type for this
    get theme() {
        return AmCharts.theme;
    }
    // TODO better type for this
    set theme(v) {
        AmCharts.theme = v;
    }
    get processDelay() {
        return AmCharts.processDelay;
    }
    set processDelay(v) {
        AmCharts.processDelay = v;
    }
    get charts() {
        return AmCharts.charts;
    }
    addInitHandler(handler, types) {
        // TODO use this.zone.runOutsideAngular ?
        AmCharts.addInitHandler(handler, types);
    }
    addPrefix(value, prefixesBig, prefixesSmall, numberFormatter) {
        // TODO use this.zone.runOutsideAngular ?
        return AmCharts.addPrefix(value, prefixesBig, prefixesSmall, numberFormatter);
    }
    clear() {
        // TODO use this.zone.runOutsideAngular ?
        AmCharts.clear();
    }
    formatDate(date, format) {
        // TODO use this.zone.runOutsideAngular ?
        return AmCharts.formatDate(date, format);
    }
    formatNumber(value, formatter, zeroCount) {
        // TODO use this.zone.runOutsideAngular ?
        return AmCharts.formatNumber(value, formatter, zeroCount);
    }
    stringToDate(value, format) {
        // TODO use this.zone.runOutsideAngular ?
        return AmCharts.stringToDate(value, format);
    }
    // TODO is Node the correct type ?
    // TODO better type for config
    makeChart(id, config, delay) {
        return this.zone.runOutsideAngular(() => AmCharts.makeChart(id, config, delay));
    }
    addListener(chart, type, fn) {
        const callback = (e) => {
            this.zone.run(() => {
                fn(e);
            });
        };
        this.zone.runOutsideAngular(() => {
            chart.addListener(type, callback);
        });
        return () => {
            this.zone.runOutsideAngular(() => {
                chart.removeListener(chart, type, callback);
            });
        };
    }
    updateChart(chart, fn) {
        this.zone.runOutsideAngular(() => {
            fn();
            chart.validateNow(true);
        });
    }
    destroyChart(chart) {
        this.zone.runOutsideAngular(() => {
            chart.clear();
        });
    }
}
AmChartsService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.11", ngImport: i0, type: AmChartsService, deps: [{ token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Injectable });
AmChartsService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.11", ngImport: i0, type: AmChartsService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.11", ngImport: i0, type: AmChartsService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW1jaGFydHMzLWFuZ3VsYXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FtY2hhcnRzL2FtY2hhcnRzMy1hbmd1bGFyL3NyYy9saWIvYW1jaGFydHMzLWFuZ3VsYXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQVUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDOztBQThDbkQsTUFBTSxPQUFPLGVBQWU7SUFDMUIsWUFBb0IsSUFBWTtRQUFaLFNBQUksR0FBSixJQUFJLENBQVE7SUFBRyxDQUFDO0lBR3BDLElBQUksVUFBVTtRQUNaLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxVQUFVO1FBQ1osT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDWixPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLE9BQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQztJQUM5QixDQUFDO0lBR0QsSUFBSSxRQUFRO1FBQ1YsT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDO0lBQzNCLENBQUM7SUFFRCxJQUFJLFFBQVEsQ0FBQyxDQUFVO1FBQ3JCLFFBQVEsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFHRCxJQUFJLE1BQU07UUFDUixPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDekIsQ0FBQztJQUVELElBQUksTUFBTSxDQUFDLENBQVU7UUFDbkIsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDdEIsQ0FBQztJQUdELElBQUksUUFBUTtRQUNWLE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRUQsSUFBSSxRQUFRLENBQUMsQ0FBZ0I7UUFDM0IsUUFBUSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUdELElBQUksVUFBVTtRQUNaLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQztJQUM3QixDQUFDO0lBRUQsSUFBSSxVQUFVLENBQUMsQ0FBZ0I7UUFDN0IsUUFBUSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUdELElBQUksYUFBYTtRQUNmLE9BQU8sUUFBUSxDQUFDLGFBQWEsQ0FBQztJQUNoQyxDQUFDO0lBRUQsSUFBSSxhQUFhLENBQUMsQ0FBZ0I7UUFDaEMsUUFBUSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUdELElBQUksZUFBZTtRQUNqQixPQUFPLFFBQVEsQ0FBQyxlQUFlLENBQUM7SUFDbEMsQ0FBQztJQUVELElBQUksZUFBZSxDQUFDLENBQWdCO1FBQ2xDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFHRCw0QkFBNEI7SUFDNUIsSUFBSSxLQUFLO1FBQ1AsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFRCw0QkFBNEI7SUFDNUIsSUFBSSxLQUFLLENBQUMsQ0FBTTtRQUNkLFFBQVEsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFHRCxJQUFJLFlBQVk7UUFDZCxPQUFPLFFBQVEsQ0FBQyxZQUFZLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQUksWUFBWSxDQUFDLENBQVM7UUFDeEIsUUFBUSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUdELElBQUksTUFBTTtRQUNSLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUN6QixDQUFDO0lBR0QsY0FBYyxDQUFDLE9BQWlDLEVBQUUsS0FBcUI7UUFDckUseUNBQXlDO1FBQ3pDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRCxTQUFTLENBQ1AsS0FBYSxFQUNiLFdBQXNELEVBQ3RELGFBQXdELEVBQ3hELGVBQTBCO1FBRTFCLHlDQUF5QztRQUN6QyxPQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDaEYsQ0FBQztJQUVELEtBQUs7UUFDSCx5Q0FBeUM7UUFDekMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFFRCxVQUFVLENBQUMsSUFBVSxFQUFFLE1BQWM7UUFDbkMseUNBQXlDO1FBQ3pDLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFhLEVBQUUsU0FBb0IsRUFBRSxTQUFpQjtRQUNqRSx5Q0FBeUM7UUFDekMsT0FBTyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFhLEVBQUUsTUFBYztRQUN4Qyx5Q0FBeUM7UUFDekMsT0FBTyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBR0Qsa0NBQWtDO0lBQ2xDLDhCQUE4QjtJQUM5QixTQUFTLENBQUMsRUFBaUIsRUFBRSxNQUFXLEVBQUUsS0FBYztRQUN0RCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUdELFdBQVcsQ0FBQyxLQUFjLEVBQUUsSUFBWSxFQUFFLEVBQTRCO1FBQ3BFLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBVSxFQUFFLEVBQUU7WUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFO2dCQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDUixDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztRQUVGLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQy9CLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3BDLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxHQUFHLEVBQUU7WUFDVixJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtnQkFDL0IsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQzlDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUdELFdBQVcsQ0FBQyxLQUFjLEVBQUUsRUFBYztRQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtZQUMvQixFQUFFLEVBQUUsQ0FBQztZQUNMLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBR0QsWUFBWSxDQUFDLEtBQWM7UUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7WUFDL0IsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ2hCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7NkdBOUtVLGVBQWU7aUhBQWYsZUFBZSxjQUZaLE1BQU07NEZBRVQsZUFBZTtrQkFIM0IsVUFBVTttQkFBQztvQkFDUixVQUFVLEVBQUUsTUFBTTtpQkFDckIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZ1pvbmUsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuXG4vLyBUT0RPIGJldHRlciB0eXBlIGZvciB0aGlzXG5kZWNsYXJlIGNvbnN0IEFtQ2hhcnRzOiBhbnk7XG5cblxuZXhwb3J0IGludGVyZmFjZSBBbUNoYXJ0IHtcbiAgW2tleTogc3RyaW5nXTogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtRXZlbnQge1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRm9ybWF0dGVyIHtcbiAgcHJlY2lzaW9uOiBudW1iZXI7XG4gIGRlY2ltYWxTZXBhcmF0b3I6IHN0cmluZztcbiAgdGhvdXNhbmRzU2VwYXJhdG9yOiBzdHJpbmc7XG59XG5cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgU3RvY2tQYW5lbCB7XG4gIGNvbnN0cnVjdG9yKCk7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgU3RvY2tHcmFwaCB7XG4gIGNvbnN0cnVjdG9yKCk7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgU3RvY2tFdmVudCB7XG4gIGNvbnN0cnVjdG9yKCk7XG4gIFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgU3RvY2tMZWdlbmQge1xuICBjb25zdHJ1Y3RvcigpO1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cblxuQEluamVjdGFibGUoe1xuICAgIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBBbUNoYXJ0c1NlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHpvbmU6IE5nWm9uZSkge31cblxuXG4gIGdldCBTdG9ja1BhbmVsKCk6IHR5cGVvZiBTdG9ja1BhbmVsIHtcbiAgICByZXR1cm4gQW1DaGFydHMuU3RvY2tQYW5lbDtcbiAgfVxuXG4gIGdldCBTdG9ja0dyYXBoKCk6IHR5cGVvZiBTdG9ja0dyYXBoIHtcbiAgICByZXR1cm4gQW1DaGFydHMuU3RvY2tHcmFwaDtcbiAgfVxuXG4gIGdldCBTdG9ja0V2ZW50KCk6IHR5cGVvZiBTdG9ja0V2ZW50IHtcbiAgICByZXR1cm4gQW1DaGFydHMuU3RvY2tFdmVudDtcbiAgfVxuXG4gIGdldCBTdG9ja0xlZ2VuZCgpOiB0eXBlb2YgU3RvY2tMZWdlbmQge1xuICAgIHJldHVybiBBbUNoYXJ0cy5TdG9ja0xlZ2VuZDtcbiAgfVxuXG5cbiAgZ2V0IGJhc2VIcmVmKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBBbUNoYXJ0cy5iYXNlSHJlZjtcbiAgfVxuXG4gIHNldCBiYXNlSHJlZih2OiBib29sZWFuKSB7XG4gICAgQW1DaGFydHMuYmFzZUhyZWYgPSB2O1xuICB9XG5cblxuICBnZXQgdXNlVVRDKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBBbUNoYXJ0cy51c2VVVEM7XG4gIH1cblxuICBzZXQgdXNlVVRDKHY6IGJvb2xlYW4pIHtcbiAgICBBbUNoYXJ0cy51c2VVVEMgPSB2O1xuICB9XG5cblxuICBnZXQgZGF5TmFtZXMoKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgcmV0dXJuIEFtQ2hhcnRzLmRheU5hbWVzO1xuICB9XG5cbiAgc2V0IGRheU5hbWVzKHY6IEFycmF5PHN0cmluZz4pIHtcbiAgICBBbUNoYXJ0cy5kYXlOYW1lcyA9IHY7XG4gIH1cblxuXG4gIGdldCBtb250aE5hbWVzKCk6IEFycmF5PHN0cmluZz4ge1xuICAgIHJldHVybiBBbUNoYXJ0cy5tb250aE5hbWVzO1xuICB9XG5cbiAgc2V0IG1vbnRoTmFtZXModjogQXJyYXk8c3RyaW5nPikge1xuICAgIEFtQ2hhcnRzLm1vbnRoTmFtZXMgPSB2O1xuICB9XG5cblxuICBnZXQgc2hvcnREYXlOYW1lcygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gQW1DaGFydHMuc2hvcnREYXlOYW1lcztcbiAgfVxuXG4gIHNldCBzaG9ydERheU5hbWVzKHY6IEFycmF5PHN0cmluZz4pIHtcbiAgICBBbUNoYXJ0cy5zaG9ydERheU5hbWVzID0gdjtcbiAgfVxuXG5cbiAgZ2V0IHNob3J0TW9udGhOYW1lcygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gQW1DaGFydHMuc2hvcnRNb250aE5hbWVzO1xuICB9XG5cbiAgc2V0IHNob3J0TW9udGhOYW1lcyh2OiBBcnJheTxzdHJpbmc+KSB7XG4gICAgQW1DaGFydHMuc2hvcnRNb250aE5hbWVzID0gdjtcbiAgfVxuXG5cbiAgLy8gVE9ETyBiZXR0ZXIgdHlwZSBmb3IgdGhpc1xuICBnZXQgdGhlbWUoKTogYW55IHtcbiAgICByZXR1cm4gQW1DaGFydHMudGhlbWU7XG4gIH1cblxuICAvLyBUT0RPIGJldHRlciB0eXBlIGZvciB0aGlzXG4gIHNldCB0aGVtZSh2OiBhbnkpIHtcbiAgICBBbUNoYXJ0cy50aGVtZSA9IHY7XG4gIH1cblxuXG4gIGdldCBwcm9jZXNzRGVsYXkoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gQW1DaGFydHMucHJvY2Vzc0RlbGF5O1xuICB9XG5cbiAgc2V0IHByb2Nlc3NEZWxheSh2OiBudW1iZXIpIHtcbiAgICBBbUNoYXJ0cy5wcm9jZXNzRGVsYXkgPSB2O1xuICB9XG5cblxuICBnZXQgY2hhcnRzKCk6IEFycmF5PEFtQ2hhcnQ+IHtcbiAgICByZXR1cm4gQW1DaGFydHMuY2hhcnRzO1xuICB9XG5cblxuICBhZGRJbml0SGFuZGxlcihoYW5kbGVyOiAoY2hhcnQ6IEFtQ2hhcnQpID0+IHZvaWQsIHR5cGVzPzogQXJyYXk8c3RyaW5nPik6IHZvaWQge1xuICAgIC8vIFRPRE8gdXNlIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhciA/XG4gICAgQW1DaGFydHMuYWRkSW5pdEhhbmRsZXIoaGFuZGxlciwgdHlwZXMpO1xuICB9XG5cbiAgYWRkUHJlZml4KFxuICAgIHZhbHVlOiBudW1iZXIsXG4gICAgcHJlZml4ZXNCaWc6IEFycmF5PHsgbnVtYmVyOiBudW1iZXIsIHByZWZpeDogc3RyaW5nIH0+LFxuICAgIHByZWZpeGVzU21hbGw6IEFycmF5PHsgbnVtYmVyOiBudW1iZXIsIHByZWZpeDogc3RyaW5nIH0+LFxuICAgIG51bWJlckZvcm1hdHRlcjogRm9ybWF0dGVyXG4gICk6IHN0cmluZyB7XG4gICAgLy8gVE9ETyB1c2UgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyID9cbiAgICByZXR1cm4gQW1DaGFydHMuYWRkUHJlZml4KHZhbHVlLCBwcmVmaXhlc0JpZywgcHJlZml4ZXNTbWFsbCwgbnVtYmVyRm9ybWF0dGVyKTtcbiAgfVxuXG4gIGNsZWFyKCk6IHZvaWQge1xuICAgIC8vIFRPRE8gdXNlIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhciA/XG4gICAgQW1DaGFydHMuY2xlYXIoKTtcbiAgfVxuXG4gIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSwgZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFRPRE8gdXNlIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhciA/XG4gICAgcmV0dXJuIEFtQ2hhcnRzLmZvcm1hdERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgfVxuXG4gIGZvcm1hdE51bWJlcih2YWx1ZTogbnVtYmVyLCBmb3JtYXR0ZXI6IEZvcm1hdHRlciwgemVyb0NvdW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIC8vIFRPRE8gdXNlIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhciA/XG4gICAgcmV0dXJuIEFtQ2hhcnRzLmZvcm1hdE51bWJlcih2YWx1ZSwgZm9ybWF0dGVyLCB6ZXJvQ291bnQpO1xuICB9XG5cbiAgc3RyaW5nVG9EYXRlKHZhbHVlOiBzdHJpbmcsIGZvcm1hdDogc3RyaW5nKTogRGF0ZSB7XG4gICAgLy8gVE9ETyB1c2UgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyID9cbiAgICByZXR1cm4gQW1DaGFydHMuc3RyaW5nVG9EYXRlKHZhbHVlLCBmb3JtYXQpO1xuICB9XG5cblxuICAvLyBUT0RPIGlzIE5vZGUgdGhlIGNvcnJlY3QgdHlwZSA/XG4gIC8vIFRPRE8gYmV0dGVyIHR5cGUgZm9yIGNvbmZpZ1xuICBtYWtlQ2hhcnQoaWQ6IHN0cmluZyB8IE5vZGUsIGNvbmZpZzogYW55LCBkZWxheT86IG51bWJlcik6IEFtQ2hhcnQge1xuICAgIHJldHVybiB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gQW1DaGFydHMubWFrZUNoYXJ0KGlkLCBjb25maWcsIGRlbGF5KSk7XG4gIH1cblxuXG4gIGFkZExpc3RlbmVyKGNoYXJ0OiBBbUNoYXJ0LCB0eXBlOiBzdHJpbmcsIGZuOiAoZXZlbnQ6IEFtRXZlbnQpID0+IHZvaWQpOiAoKSA9PiB2b2lkIHtcbiAgICBjb25zdCBjYWxsYmFjayA9IChlOiBBbUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcbiAgICAgICAgZm4oZSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGNoYXJ0LmFkZExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICBjaGFydC5yZW1vdmVMaXN0ZW5lcihjaGFydCwgdHlwZSwgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG5cbiAgdXBkYXRlQ2hhcnQoY2hhcnQ6IEFtQ2hhcnQsIGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGZuKCk7XG4gICAgICBjaGFydC52YWxpZGF0ZU5vdyh0cnVlKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgZGVzdHJveUNoYXJ0KGNoYXJ0OiBBbUNoYXJ0KTogdm9pZCB7XG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGNoYXJ0LmNsZWFyKCk7XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==